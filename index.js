var yt=Object.defineProperty;var gt=(e,t,n)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var be=(e,t,n)=>(gt(e,typeof t!="symbol"?t+"":t,n),n),ve=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var le=(e,t,n)=>(ve(e,t,"read from private field"),n?n.call(e):t.get(e)),ke=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_e=(e,t,n,r)=>(ve(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var Me=(e,t,n)=>(ve(e,t,"access private method"),n);/* empty css                    */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const q=()=>{},ae=e=>e;function B(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function R(e){return e.length===0?void 0:e.length===1?e[0]:e}function wt(e){return e==null?[]:Array.isArray(e)?e:typeof e=="string"||typeof e[Symbol.iterator]!="function"?[e]:[...e]}function mt(e){return e!=null&&typeof e.next=="function"}function m(e){return e!=null&&typeof e.then=="function"}const ie="",k=Symbol.for("crank.Portal"),Je=Symbol.for("crank.Copy"),Qe=Symbol.for("crank.Raw"),Ze=Symbol.for("crank.Element");class Oe{constructor(t,n,r,i,o){this.tag=t,this.props=n,this.key=r,this.ref=i,this.static_=o}}Oe.prototype.$$typeof=Ze;function bt(e){return e!=null&&e.$$typeof===Ze}function p(e,t,...n){let r,i,o=!1;const s={};if(t!=null)for(const l in t)switch(l){case"crank-key":case"c-key":case"$key":t[l]!=null&&(r=t[l]);break;case"crank-ref":case"c-ref":case"$ref":typeof t[l]=="function"&&(i=t[l]);break;case"crank-static":case"c-static":case"$static":o=!!t[l];break;default:s[l]=t[l]}return n.length>1?s.children=n:n.length===1&&(s.children=n[0]),new Oe(e,s,r,i,o)}function xe(e){if(!(typeof e=="boolean"||e==null)){{if(typeof e=="string"||bt(e))return e;if(typeof e[Symbol.iterator]=="function")return p(ie,null,e)}return e.toString()}}function Te(e){const t=[];let n;for(let r=0;r<e.length;r++){const i=e[r];if(i)if(typeof i=="string")n=(n||"")+i;else if(!Array.isArray(i))n&&(t.push(n),n=void 0),t.push(i);else for(let o=0;o<i.length;o++){const s=i[o];s&&(typeof s=="string"?n=(n||"")+s:(n&&(t.push(n),n=void 0),t.push(s)))}}return n&&t.push(n),t}class Pe{constructor(t){this.el=t,this.ctx=void 0,this.children=void 0,this.value=void 0,this.cachedChildValues=void 0,this.fallbackValue=void 0,this.inflightValue=void 0,this.onNextValues=void 0}}function O(e){return typeof e.fallbackValue<"u"?typeof e.fallbackValue=="object"?O(e.fallbackValue):e.fallbackValue:e.el.tag===k?void 0:typeof e.el.tag!="function"&&e.el.tag!==ie?e.value:R(ee(e))}function ee(e){if(e.cachedChildValues)return B(e.cachedChildValues);const t=[],n=B(e.children);for(let o=0;o<n.length;o++){const s=n[o];s&&t.push(typeof s=="string"?s:O(s))}const r=Te(t),i=e.el.tag;return(typeof i=="function"||i!==ie&&i!==Qe)&&(e.cachedChildValues=R(r)),r}const vt={create(){throw new Error("Not implemented")},hydrate(){throw new Error("Not implemented")},scope:ae,read:ae,text:ae,raw:ae,patch:q,arrange:q,dispose:q,flush:q},Ee=Symbol.for("crank.RendererImpl");class kt{constructor(t){this.cache=new WeakMap,this[Ee]={...vt,...t}}render(t,n,r){let i;const o=r&&r[v];typeof n=="object"&&n!==null&&(i=this.cache.get(n));let s;if(i===void 0)i=new Pe(p(k,{children:t,root:n})),i.value=n,i.ctx=o,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,i);else{if(i.ctx!==o)throw new Error("Context mismatch");s=i.el.props,i.el=p(k,{children:t,root:n}),typeof n=="object"&&n!==null&&t==null&&this.cache.delete(n)}const l=this[Ee],a=te(l,n,i,o,l.scope(void 0,k,i.el.props),i,t,void 0);return m(a)?a.then(f=>fe(l,n,o,i,f,s)):fe(l,n,o,i,a,s)}hydrate(t,n,r){const i=this[Ee],o=r&&r[v];let s;if(s=this.cache.get(n),s!==void 0)return this.render(t,n,r);let l;s=new Pe(p(k,{children:t,root:n})),s.value=n,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,s);const a=i.hydrate(k,n,{}),f=te(i,n,s,o,i.scope(void 0,k,s.el.props),s,t,a);return m(f)?f.then(u=>fe(i,n,o,s,u,l)):fe(i,n,o,s,f,l)}}function fe(e,t,n,r,i,o){return t!=null&&(e.arrange(k,t,r.el.props,i,o,B(r.cachedChildValues)),me(e,t)),r.cachedChildValues=R(i),t==null&&de(e,r,n,r),e.read(r.cachedChildValues)}function te(e,t,n,r,i,o,s,l){const a=B(o.children),f=[],u=wt(s),d=[];let h,g,P,z=!1,L,D=0,De=a.length;for(let b=0,se=u.length;b<se;b++){let c=D>=De?void 0:a[D],N=xe(u[b]);{let W=typeof c=="object"?c.el.key:void 0,y=typeof N=="object"?N.key:void 0;if(y!==void 0&&P&&P.has(y)&&(console.error("Duplicate key",y),y=void 0),W===y)g!==void 0&&y!==void 0&&g.delete(y),D++;else if(g=g||Et(a,D),y===void 0){for(;c!==void 0&&W!==void 0;)D++,c=a[D],W=typeof c=="object"?c.el.key:void 0;D++}else c=g.get(y),c!==void 0&&g.delete(y),(P=P||new Set).add(y)}let V;if(typeof N=="object"){if(N.tag===Je)V=Le(c);else{let y,Ae=!1;if(typeof c=="object"&&c.el.tag===N.tag)y=c.el.props,c.el=N,N.static_&&(V=Le(c),Ae=!0);else{typeof c=="object"&&(h=h||[]).push(c);const pt=c;c=new Pe(N),c.fallbackValue=pt}Ae||(N.tag===Qe?V=L?L.then(()=>Ie(e,c,i,y,l)):Ie(e,c,i,y,l):N.tag===ie?V=L?L.then(()=>Be(e,t,n,r,i,c,l)):Be(e,t,n,r,i,c,l):typeof N.tag=="function"?V=L?L.then(()=>Re(e,t,n,r,i,c,y,l)):Re(e,t,n,r,i,c,y,l):V=L?L.then(()=>We(e,t,r,i,c,y,l)):We(e,t,r,i,c,y,l))}const W=N.ref;m(V)?(z=!0,typeof W=="function"&&(V=V.then(y=>(W(e.read(y)),y))),l!==void 0&&(L=V)):typeof W=="function"&&W(e.read(V))}else typeof c=="object"&&(h=h||[]).push(c),typeof N=="string"?V=c=e.text(N,i,l):c=void 0;d[b]=V,f[b]=c}for(;D<De;D++){const b=a[D];typeof b=="object"&&(h=h||[]).push(b)}if(g!==void 0&&g.size>0&&(h=h||[]).push(...g.values()),o.children=R(f),z){let b=Promise.all(d).finally(()=>{if(h)for(let c=0;c<h.length;c++)de(e,n,r,h[c])}),se;return b=Promise.race([b,new Promise(c=>se=c)]),o.onNextValues&&o.onNextValues(b),o.onNextValues=se,b.then(c=>(o.inflightValue=o.fallbackValue=void 0,Te(c)))}else{if(h)for(let b=0;b<h.length;b++)de(e,n,r,h[b]);return o.onNextValues&&(o.onNextValues(d),o.onNextValues=void 0),o.inflightValue=o.fallbackValue=void 0,Te(d)}}function Et(e,t){const n=new Map;for(let r=t;r<e.length;r++){const i=e[r];typeof i=="object"&&typeof i.el.key<"u"&&n.set(i.el.key,i)}return n}function Le(e){if(typeof e!="object")return e;const t=typeof e.el.tag=="function"?e.ctx:void 0;return t&&t.f&F&&t.inflightValue?t.inflightValue:e.inflightValue?e.inflightValue:O(e)}function Ie(e,t,n,r,i){const o=t.el.props;return(!r||r.value!==o.value)&&(t.value=e.raw(o.value,n,i)),t.value}function Be(e,t,n,r,i,o,s){const l=te(e,t,n,r,i,o,o.el.props.children,s);return m(l)?(o.inflightValue=l.then(a=>R(a)),o.inflightValue):R(l)}function We(e,t,n,r,i,o,s){const l=i.el,a=l.tag;let f;l.tag===k?t=i.value=l.props.root:s!==void 0&&(f=s.children.shift()),r=e.scope(r,a,l.props);let u;f!=null&&typeof f!="string"&&(u=e.hydrate(a,f,l.props),u===void 0&&(f=void 0));const d=te(e,t,i,n,r,i,i.el.props.children,u);return m(d)?(i.inflightValue=d.then(h=>qe(e,r,i,h,o,f)),i.inflightValue):qe(e,r,i,d,o,f)}function qe(e,t,n,r,i,o){const s=n.el.tag;let l=n.value;o!=null&&(l=n.value=o);let a=n.el.props,f;if(s!==k){l==null&&(l=n.value=e.create(s,a,t));for(const u in{...i,...a}){const d=a[u];d===Je?(f=f||new Set).add(u):u!=="children"&&e.patch(s,l,u,d,i&&i[u],t)}}if(f){a={...n.el.props};for(const u of f)a[u]=i&&i[u];n.el=new Oe(s,a,n.el.key,n.el.ref)}if(e.arrange(s,l,a,r,i,B(n.cachedChildValues)),n.cachedChildValues=R(r),s===k){me(e,n.value);return}return l}function me(e,t,n){if(e.flush(t),typeof t!="object"||t===null)return;const r=J.get(t);if(r){if(n){const i=new Map;for(let[o,s]of r)Vt(n,o)||(r.delete(o),i.set(o,s));i.size?J.set(t,i):J.delete(t)}else J.delete(t);for(const[i,o]of r){const s=e.read(O(i.ret));for(const l of o)l(s)}}}function de(e,t,n,r){if(typeof r.el.tag=="function")n=r.ctx,ue(n);else if(r.el.tag===k)t=r,e.arrange(k,t.value,t.el.props,[],t.el.props,B(t.cachedChildValues)),me(e,t.value);else if(r.el.tag!==ie){if(x(r.value)){const o=et(n,t);for(let s=0;s<o.length;s++){const l=o[s];r.value.removeEventListener(l.type,l.callback,l.options)}}e.dispose(r.el.tag,r.value,r.el.props),t=r}const i=B(r.children);for(let o=0;o<i.length;o++){const s=i[o];typeof s=="object"&&de(e,t,n,s)}}const F=1,w=2,S=4,ne=8,H=16,re=32,_=64,M=128,Q=256,U=512,Ce=1024,Ne=2048,Ve=new WeakMap,he=new WeakMap,pe=new WeakMap,J=new WeakMap;class Ct{constructor(t,n,r,i,o,s){this.f=0,this.owner=new Nt(this),this.renderer=t,this.root=n,this.host=r,this.parent=i,this.scope=o,this.ret=s,this.iterator=void 0,this.inflightBlock=void 0,this.inflightValue=void 0,this.enqueuedBlock=void 0,this.enqueuedValue=void 0,this.onProps=void 0,this.onPropsRequested=void 0}}const v=Symbol.for("crank.ContextImpl");class Nt{constructor(t){this[v]=t}get props(){return this[v].ret.el.props}get value(){return this[v].renderer.read(O(this[v].ret))}*[Symbol.iterator](){const t=this[v];try{for(t.f|=S;!(t.f&M);){if(t.f&H)throw new Error("Context iterated twice without a yield");t.f|=H,yield t.ret.el.props}}finally{t.f&=~S}}async*[Symbol.asyncIterator](){const t=this[v];if(t.f&Q)throw new Error("Use for...of in sync generator components");try{for(t.f|=ne;!(t.f&M);){if(t.f&H)throw new Error("Context iterated twice without a yield");if(t.f|=H,t.f&re)t.f&=~re,yield t.ret.el.props;else{const n=await new Promise(r=>t.onProps=r);if(t.f&M)break;yield n}t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}finally{t.f&=~ne,t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}refresh(){const t=this[v];if(t.f&M)return console.error("Component is unmounted"),t.renderer.read(void 0);if(t.f&w)return console.error("Component is already executing"),this.value;const n=ye(t);return m(n)?n.then(r=>t.renderer.read(r)):t.renderer.read(n)}schedule(t){const n=this[v];let r=he.get(n);r||(r=new Set,he.set(n,r)),r.add(t)}flush(t){const n=this[v];if(typeof n.root!="object"||n.root===null)return;let r=J.get(n.root);r||(r=new Map,J.set(n.root,r));let i=r.get(n);i||(i=new Set,r.set(n,i)),i.add(t)}cleanup(t){const n=this[v];if(n.f&M){const i=n.renderer.read(O(n.ret));t(i);return}let r=pe.get(n);r||(r=new Set,pe.set(n,r)),r.add(t)}consume(t){for(let n=this[v].parent;n!==void 0;n=n.parent){const r=Ve.get(n);if(r&&r.has(t))return r.get(t)}}provide(t,n){const r=this[v];let i=Ve.get(r);i||(i=new Map,Ve.set(r,i)),i.set(t,n)}addEventListener(t,n,r){const i=this[v];let o;if(Ge(n)){const a=I.get(i);a?o=a:(o=[],I.set(i,o))}else return;r=$e(r);let s;typeof n=="object"?s=()=>n.handleEvent.apply(n,arguments):s=n;const l={type:t,listener:n,callback:s,options:r};if(r.once&&(l.callback=function(){const a=o.indexOf(l);return a!==-1&&o.splice(a,1),s.apply(this,arguments)}),!o.some(a=>l.type===a.type&&l.listener===a.listener&&!l.options.capture==!a.options.capture)){o.push(l);for(const a of ee(i.ret))x(a)&&a.addEventListener(l.type,l.callback,l.options)}}removeEventListener(t,n,r){const i=this[v],o=I.get(i);if(o==null||!Ge(n))return;const s=$e(r),l=o.findIndex(f=>f.type===t&&f.listener===n&&!f.options.capture==!s.capture);if(l===-1)return;const a=o[l];o.splice(l,1);for(const f of ee(i.ret))x(f)&&f.removeEventListener(a.type,a.callback,a.options)}dispatchEvent(t){const n=this[v],r=[];for(let s=n.parent;s!==void 0;s=s.parent)r.push(s);let i=!1;const o=t.stopImmediatePropagation;A(t,"stopImmediatePropagation",()=>(i=!0,o.call(t))),A(t,"target",n.owner);try{A(t,"eventPhase",Ot);for(let s=r.length-1;s>=0;s--){const l=r[s],a=I.get(l);if(a){A(t,"currentTarget",l.owner);for(const f of a)if(f.type===t.type&&f.options.capture){try{f.callback.call(l.owner,t)}catch(u){console.error(u)}if(i)return!0}}if(t.cancelBubble)return!0}{A(t,"eventPhase",Dt),A(t,"currentTarget",n.owner);const s=n.ret.el.props["on"+t.type];if(s!=null&&(s(t),i||t.cancelBubble))return!0;const l=I.get(n);if(l){for(const a of l)if(a.type===t.type){try{a.callback.call(n.owner,t)}catch(f){console.error(f)}if(i)return!0}if(t.cancelBubble)return!0}}if(t.bubbles){A(t,"eventPhase",At);for(let s=0;s<r.length;s++){const l=r[s],a=I.get(l);if(a){A(t,"currentTarget",l.owner);for(const f of a)if(f.type===t.type&&!f.options.capture){try{f.callback.call(l.owner,t)}catch(u){console.error(u)}if(i)return!0}}if(t.cancelBubble)return!0}}}finally{return A(t,"eventPhase",Pt),A(t,"currentTarget",null),!t.defaultPrevented}}}function Vt(e,t){for(let n=t;n!==void 0;n=n.parent)if(n===e)return!0;return!1}function Re(e,t,n,r,i,o,s,l){let a;if(s){if(a=o.ctx,a.f&w)return console.error("Component is already executing"),o.cachedChildValues}else a=o.ctx=new Ct(e,t,n,r,i,o);return a.f|=F,ye(a,l)}function Y(e,t,n){if(e.f&M)return;if(e.f&_)return;t===void 0&&console.error("A component has returned or yielded undefined. If this was intentional, return or yield null instead.");let r;try{e.f|=w,r=te(e.renderer,e.root,e.host,e,e.scope,e.ret,xe(t),n)}finally{e.f&=~w}return m(r)?(e.ret.inflightValue=r.then(i=>Fe(e,i)),e.ret.inflightValue):Fe(e,r)}function Fe(e,t){if(e.f&M)return;const n=I.get(e);if(n&&n.length)for(let s=0;s<t.length;s++){const l=t[s];if(x(l))for(let a=0;a<n.length;a++){const f=n[a];l.addEventListener(f.type,f.callback,f.options)}}const r=B(e.ret.cachedChildValues);let i=e.ret.cachedChildValues=R(t);if(e.f&Ce)e.f|=Ne;else if(!(e.f&F)){if(!Tt(r,t)){const s=et(e.parent,e.host);if(s.length)for(let u=0;u<t.length;u++){const d=t[u];if(x(d))for(let h=0;h<s.length;h++){const g=s[h];d.addEventListener(g.type,g.callback,g.options)}}const l=e.host,a=B(l.cachedChildValues);St(e,l);const f=ee(l);e.renderer.arrange(l.el.tag,l.value,l.el.props,f,l.el.props,a)}me(e.renderer,e.root,e)}const o=he.get(e);if(o){he.delete(e),e.f|=Ce;const s=e.renderer.read(i);for(const l of o)l(s);e.f&=~Ce,e.f&Ne&&(e.f&=~Ne,i=O(e.ret))}return e.f&=~F,i}function St(e,t){for(let n=e.parent;n!==void 0&&n.host===t;n=n.parent)n.ret.cachedChildValues=void 0;t.cachedChildValues=void 0}function Tt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r!==i)return!1}return!0}function ye(e,t){if(e.f&U&&!(e.f&S)){if(t!==void 0)throw new Error("Hydration error");const n=e.f&ne&&!e.onProps;return oe(e),n?(e.inflightBlock==null&&(e.inflightBlock=new Promise(r=>e.onPropsRequested=r)),e.inflightBlock.then(()=>(e.inflightBlock=void 0,e.inflightValue))):e.inflightValue}else if(e.inflightBlock){if(!e.enqueuedBlock){if(t!==void 0)throw new Error("Hydration error");let n;e.enqueuedBlock=new Promise(r=>n=r),e.enqueuedValue=e.inflightBlock.then(()=>{try{const[r,i]=He(e);return r&&n(r.finally(()=>je(e))),i}catch(r){if(!(e.f&F)){if(!e.parent)throw r;return j(e.parent,r)}throw r}})}}else try{const[n,r]=He(e,t);return n&&(e.inflightBlock=n.then(i=>i).finally(()=>je(e)),e.inflightValue=r),r}catch(n){if(!(e.f&F)){if(!e.parent)throw n;return j(e.parent,n)}throw n}return e.enqueuedValue}function je(e){e.f&U&&!(e.f&S)||(e.inflightBlock=e.enqueuedBlock,e.inflightValue=e.enqueuedValue,e.enqueuedBlock=void 0,e.enqueuedValue=void 0)}function He(e,t){const n=e.ret,r=!e.iterator;if(r){oe(e),e.f|=w,tt(e);let o;try{o=n.el.tag.call(e.owner,n.el.props)}catch(s){throw e.f|=_,s}finally{e.f&=~w}if(mt(o))e.iterator=o;else if(m(o)){const s=o instanceof Promise?o:Promise.resolve(o),l=s.then(a=>Y(e,a,t),a=>{throw e.f|=_,a});return[s.catch(q),l]}else return[void 0,Y(e,o,t)]}else if(t!==void 0)throw new Error("Hydration error");let i;if(r){try{e.f|=w,i=e.iterator.next()}catch(o){throw e.f|=_,o}finally{e.f&=~w}m(i)?e.f|=U:e.f|=Q}if(e.f&Q){if(e.f&=~H,!r)try{e.f|=w,i=e.iterator.next(e.renderer.read(O(n)))}catch(l){throw e.f|=_,l}finally{e.f&=~w}if(m(i))throw new Error("Mixed generator component");i.done&&(e.f&=~Q,e.iterator=void 0);let o;try{o=Y(e,i.value,t),m(o)&&(o=o.catch(l=>G(e,l)))}catch(l){o=G(e,l)}return[m(o)?o.catch(q):void 0,o]}else if(e.f&S){if(e.f&=~H,!r)try{e.f|=w,i=e.iterator.next(e.renderer.read(O(n)))}catch(l){throw e.f|=_,l}finally{e.f&=~w}if(!m(i))throw new Error("Mixed generator component");const o=i.catch(q),s=i.then(l=>{let a;e.f&S||Ye(e,Promise.resolve(l),t);try{a=Y(e,l.value,t),m(a)&&(a=a.catch(f=>G(e,f)))}catch(f){a=G(e,f)}return a},l=>{throw e.f|=_,l});return[o,s]}else return Ye(e,i,t),[e.inflightBlock,e.inflightValue]}async function Ye(e,t,n){let r=!1;try{for(;!r&&!(e.f&S);){let i;e.inflightValue=new Promise(a=>i=a),e.f&F&&e.inflightValue.catch(q);let o;try{o=await t}catch(a){r=!0,e.f|=_,i(Promise.reject(a));break}finally{e.f&=~H,e.f&ne||(e.f&=~re)}r=!!o.done;let s;try{s=Y(e,o.value,n),n=void 0,m(s)&&(s=s.catch(a=>G(e,a)))}catch(a){s=G(e,a)}finally{i(s)}let l;if(e.ret.inflightValue?(l=e.ret.inflightValue.then(a=>e.renderer.read(a)),l.catch(a=>{if(!(e.f&F)){if(!e.parent)throw a;return j(e.parent,a)}})):l=e.renderer.read(O(e.ret)),e.f&M)if(e.f&ne)try{e.f|=w,t=e.iterator.next(l)}finally{e.f&=~w}else{ce(e);break}else if(!r&&!(e.f&S))try{e.f|=w,t=e.iterator.next(l)}finally{e.f&=~w}}}finally{r&&(e.f&=~U,e.iterator=void 0)}}function oe(e){e.onProps?(e.onProps(e.ret.el.props),e.onProps=void 0,e.f&=~re):e.f|=re}function ue(e){if(e.f&M)return;tt(e);const t=pe.get(e);if(t){pe.delete(e);const n=e.renderer.read(O(e.ret));for(const r of t)r(n)}if(e.f|=M,e.iterator)if(e.f&Q){let n;e.f&S&&(n=ye(e)),m(n)?n.then(()=>{e.f&S?ue(e):ce(e)},r=>{if(!e.parent)throw r;return j(e.parent,r)}):e.f&S?ue(e):ce(e)}else e.f&U&&(e.f&S?ye(e).then(()=>{e.f&S?ue(e):ce(e)},r=>{if(!e.parent)throw r;return j(e.parent,r)}):oe(e))}function ce(e){if(oe(e),e.iterator&&typeof e.iterator.return=="function")try{e.f|=w;const t=e.iterator.return();m(t)&&t.catch(n=>{if(!e.parent)throw n;return j(e.parent,n)})}finally{e.f&=~w}}const Pt=0,Ot=1,Dt=2,At=3,I=new WeakMap;function Ge(e){return typeof e=="function"||e!==null&&typeof e=="object"&&typeof e.handleEvent=="function"}function $e(e){return typeof e=="boolean"?{capture:e}:e??{}}function x(e){return e!=null&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"&&typeof e.dispatchEvent=="function"}function A(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!0})}function et(e,t){let n=[];for(;e!==void 0&&e.host===t;){const r=I.get(e);r&&(n=n.concat(r)),e=e.parent}return n}function tt(e){const t=I.get(e);if(t&&t.length){for(const n of ee(e.ret))if(x(n))for(const r of t)n.removeEventListener(r.type,r.callback,r.options);t.length=0}}function G(e,t){if(!e.iterator||typeof e.iterator.throw!="function")throw t;oe(e);let n;try{e.f|=w,n=e.iterator.throw(t)}catch(r){throw e.f|=_,r}finally{e.f&=~w}return m(n)?n.then(r=>(r.done&&(e.f&=~U,e.iterator=void 0),Y(e,r.value)),r=>{throw e.f|=_,r}):(n.done&&(e.f&=~Q,e.f&=~U,e.iterator=void 0),Y(e,n.value))}function j(e,t){let n;try{n=G(e,t)}catch(r){if(!e.parent)throw r;return j(e.parent,r)}return m(n)?n.catch(r=>{if(!e.parent)throw r;return j(e.parent,r)}):n}const Se="http://www.w3.org/2000/svg",_t={scope(e,t,n){switch(t){case k:e=void 0;break;case"svg":e=Se;break}return n.xmlns||e},create(e,t,n){if(typeof e!="string")throw new Error(`Unknown tag: ${e.toString()}`);return e.toLowerCase()==="svg"&&(n=Se),n?document.createElementNS(n,e):document.createElement(e)},hydrate(e,t,n){if(typeof e!="string"&&e!==k)throw new Error(`Unknown tag: ${e.toString()}`);if(typeof e=="string"&&e.toUpperCase()!==t.tagName)return;const r=[];for(let i=0;i<t.childNodes.length;i++){const o=t.childNodes[i];o.nodeType===Node.TEXT_NODE?r.push(o.data):o.nodeType===Node.ELEMENT_NODE&&r.push(o)}return{props:n,children:r}},patch(e,t,n,r,i,o){const s=o===Se;switch(n){case"style":{const l=t.style;if(l==null)t.setAttribute("style",r);else if(r==null||r===!1)t.removeAttribute("style");else if(r===!0)t.setAttribute("style","");else if(typeof r=="string")l.cssText!==r&&(l.cssText=r);else{typeof i=="string"&&(l.cssText="");for(const a in{...i,...r}){const f=r&&r[a];f==null?l.removeProperty(a):l.getPropertyValue(a)!==f&&l.setProperty(a,f)}}break}case"class":case"className":r===!0?t.setAttribute("class",""):r==null?t.removeAttribute("class"):s?t.getAttribute("class")!==r&&t.setAttribute("class",r):t.className!==r&&(t.className=r);break;case"innerHTML":r!==i&&(t.innerHTML=r);break;default:{if(n in t&&!(typeof r=="string"&&typeof t[n]=="boolean")){let l=t;do if(Object.prototype.hasOwnProperty.call(l,n))break;while(l=Object.getPrototypeOf(l));const a=Object.getOwnPropertyDescriptor(l,n);if(a!=null&&(a.writable===!0||a.set!==void 0)){(t[n]!==r||i===void 0)&&(t[n]=r);return}}if(r===!0)r="";else if(r==null||r===!1){t.removeAttribute(n);return}t.getAttribute(n)!==r&&t.setAttribute(n,r)}}},arrange(e,t,n,r,i,o){if(e===k&&(t==null||typeof t.nodeType!="number"))throw new TypeError(`Portal root is not a node. Received: ${JSON.stringify(t&&t.toString())}`);if(!("innerHTML"in n)&&("children"in n||o&&o.length))if(r.length===0)t.textContent="";else{let s=t.firstChild,l=0;for(;s!==null&&l<r.length;){const a=r[l];if(s===a)s=s.nextSibling,l++;else if(typeof a=="string")s.nodeType===Node.TEXT_NODE?(s.data!==a&&(s.data=a),s=s.nextSibling):t.insertBefore(document.createTextNode(a),s),l++;else if(s.nodeType===Node.TEXT_NODE){const f=s.nextSibling;t.removeChild(s),s=f}else if(t.insertBefore(a,s),l++,s!==r[l]){const f=s.nextSibling;t.removeChild(s),s=f}}for(;s!==null;){const a=s.nextSibling;t.removeChild(s),s=a}for(;l<r.length;l++){const a=r[l];t.appendChild(typeof a=="string"?document.createTextNode(a):a)}}},text(e,t,n){if(n!=null){let r=n.children.shift();typeof r!="string"||!r.startsWith(e)||e.length<r.length&&(r=r.slice(e.length),n.children.unshift(r))}return e},raw(e,t,n){let r;if(typeof e=="string"){const i=t==null?document.createElement("div"):document.createElementNS(t,"svg");i.innerHTML=e,i.childNodes.length===0?r=void 0:i.childNodes.length===1?r=i.childNodes[0]:r=Array.from(i.childNodes)}else r=e;if(n!=null)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];typeof o!="string"&&(o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE)&&n.children.shift()}else r!=null&&typeof r!="string"&&(r.nodeType===Node.ELEMENT_NODE||r.nodeType===Node.TEXT_NODE)&&n.children.shift();return r}};class Mt extends kt{constructor(){super(_t)}render(t,n,r){return Ue(n),super.render(t,n,r)}hydrate(t,n,r){return Ue(n),super.hydrate(t,n,r)}}function Ue(e){if(e===null||typeof e=="object"&&typeof e.nodeType!="number")throw new TypeError(`Render root is not a node. Received: ${JSON.stringify(e&&e.toString())}`)}const Lt=new Mt;function It(e){document.readyState==="complete"?e():(window.addEventListener("load",t),document.addEventListener("DOMContentLoaded",t));function t(){window.removeEventListener("load",t),document.removeEventListener("DOMContentLoaded",t),e()}}async function Bt(e){try{const n=sessionStorage.getItem("binday:geo");if(e!=null&&e.cache&&n){const r=JSON.parse(n);if(!r.latitude||!r.longitude)throw new Error("cache: invalid coordinate data");if(r._timestamp<Date.now()-1e3*e.cache)throw new Error("cache: expired");return r}}catch(n){console.warn(n.message)}const t=await new Promise((n,r)=>{navigator.geolocation.getCurrentPosition(i=>n(i.coords),r,e)});return sessionStorage.setItem("binday:geo",JSON.stringify({_timestamp:Date.now(),latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,speed:t.speed})),t}function E(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function C(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function T(e){C(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function nt(e,t){C(2,arguments);var n=T(e),r=E(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Wt(e,t){C(2,arguments);var n=T(e),r=E(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var s=o.getDate();return i>=s?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function rt(e,t){if(C(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?E(t.years):0,r="months"in t?E(t.months):0,i="weeks"in t?E(t.weeks):0,o="days"in t?E(t.days):0,s="hours"in t?E(t.hours):0,l="minutes"in t?E(t.minutes):0,a="seconds"in t?E(t.seconds):0,f=T(e),u=r||n?Wt(f,r+n*12):f,d=o||i?nt(u,o+i*7):u,h=l+s*60,g=a+h*60,P=g*1e3,z=new Date(d.getTime()+P);return z}function qt(e){C(1,arguments);var t=T(e),n=t.getDay();return n===0||n===6}function ge(e,t){C(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=i==null?0:E(i),s=n.weekStartsOn==null?o:E(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=T(e),a=l.getDay(),f=(a<s?7:0)+a-s;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}function Ke(e){C(1,arguments);var t=T(e);return t.setHours(0,0,0,0),t}function it(e,t){C(2,arguments);var n=Ke(e),r=Ke(t);return n.getTime()===r.getTime()}function Rt(e,t){C(1,arguments);var n=T(e),r=n.getFullYear(),i=t||{},o=i.locale,s=o&&o.options&&o.options.firstWeekContainsDate,l=s==null?1:E(s),a=i.firstWeekContainsDate==null?l:E(i.firstWeekContainsDate);if(!(a>=1&&a<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setFullYear(r+1,0,a),f.setHours(0,0,0,0);var u=ge(f,t),d=new Date(0);d.setFullYear(r,0,a),d.setHours(0,0,0,0);var h=ge(d,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function Ft(e,t){C(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=i==null?1:E(i),s=n.firstWeekContainsDate==null?o:E(n.firstWeekContainsDate),l=Rt(e,t),a=new Date(0);a.setFullYear(l,0,s),a.setHours(0,0,0,0);var f=ge(a,t);return f}var jt=6048e5;function Ht(e,t){C(1,arguments);var n=T(e),r=ge(n,t).getTime()-Ft(n,t).getTime();return Math.round(r/jt)+1}function Yt(e,t){C(2,arguments);var n=T(e),r=T(t);return n.getTime()<r.getTime()}function Gt(e,t){C(2,arguments);var n=T(e),r=T(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function $t(e){return C(1,arguments),it(e,Date.now())}function Ut(e){return C(1,arguments),it(e,nt(Date.now(),1))}function Kt(e,t,n){if(n=n||{},!ot(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(e===void 0)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");r&&st(r),i&&lt(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function zt(e,t,n){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!K(e[0])||!K(e[1]))throw new Error("coordinates must contain numbers");return Kt({type:"Point",coordinates:e},t,n)}function Xt(e,t){if(t=t||{},!ot(t))throw new Error("options is invalid");var n=t.bbox,r=t.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");n&&st(n),r&&lt(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=e,i}function K(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ot(e){return!!e&&e.constructor===Object}function st(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!K(t))throw new Error("bbox must only contain numbers")})}function lt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function Jt(e){if(!e)throw new Error("obj is required");var t=at(e);if(t.length>1&&K(t[0])&&K(t[1]))return t;throw new Error("Coordinate is not a valid Point")}function at(e){if(!e)throw new Error("obj is required");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return ft(t),t;throw new Error("No valid coordinates")}function ft(e){if(e.length>1&&K(e[0])&&K(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return ft(e[0]);throw new Error("coordinates must only contain numbers")}function Qt(e,t,n){if(n=n||{},typeof n!="object")throw new Error("options is invalid");var r=n.ignoreBoundary;if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=Jt(e),o=at(t),s=t.geometry?t.geometry.type:t.type,l=t.bbox;if(l&&Zt(i,l)===!1)return!1;s==="Polygon"&&(o=[o]);for(var a=0,f=!1;a<o.length&&!f;a++)if(ze(i,o[a][0],r)){for(var u=!1,d=1;d<o[a].length&&!u;)ze(i,o[a][d],!r)&&(u=!0),d++;u||(f=!0)}return f}function ze(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var s=t[i][0],l=t[i][1],a=t[o][0],f=t[o][1],u=e[1]*(s-a)+l*(a-e[0])+f*(e[0]-s)===0&&(s-e[0])*(a-e[0])<=0&&(l-e[1])*(f-e[1])<=0;if(u)return!n;var d=l>e[1]!=f>e[1]&&e[0]<(a-s)*(e[1]-l)/(f-l)+s;d&&(r=!r)}return r}function Zt(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function xt(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length;n++)t(e.features[n],n)}function en(e,t){var n,r,i,o,s,l,a,f,u,d,h=0,g=e.type==="FeatureCollection",P=e.type==="Feature",z=g?e.features.length:1;for(n=0;n<z;n++){for(l=g?e.features[n].geometry:P?e.geometry:e,f=g?e.features[n].properties:P?e.properties:{},u=g?e.features[n].bbox:P?e.bbox:void 0,d=g?e.features[n].id:P?e.id:void 0,a=l?l.type==="GeometryCollection":!1,s=a?l.geometries.length:1,i=0;i<s;i++){if(o=a?l.geometries[i]:l,o===null){t(null,h,f,u,d);continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{t(o,h,f,u,d);break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)t(o.geometries[r],h,f,u,d);break}default:throw new Error("Unknown Geometry Type")}}h++}}function tn(e,t){var n=[];return en(t,function(r){xt(e,function(i){Qt(i,r)&&n.push(i)})}),Xt(n)}const Z=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];var $,we,ut;class nn{constructor(t,n){ke(this,we);be(this,"config");be(this,"coords");ke(this,$,void 0);this.config=t,this.coords=n,_e(this,$,Me(this,we,ut).call(this))}updateCoordinates(t){this.coords=t}getWeek(t){const n={};if(!le(this,$)||!le(this,$).properties)return n;const r=Ht(t);for(let[i,o]of Object.entries(le(this,$).properties)){if(typeof o!="string"||!this.config.patterns[i])continue;const s=this.config.patterns[i],l=s[(r-1)%s.length];if(o=o.toLowerCase().trim(),!ln(o)){console.warn("invalid day:",o);continue}n[o]?n[o].push(l):n[o]=[l]}return n}getColors(t){const n=Z[t.getDay()];return this.getWeek(t)[n]??[]}getNextDate(t){const n=this.getWeek(t),r=Z[t.getDay()];if(n[r])return t;for(let i=1;i<7;i++){const o=rt(t,{days:i}),s=Z[o.getDay()];if(n[s])return o}return null}}$=new WeakMap,we=new WeakSet,ut=function(){if(!ct(this.config.map)){console.warn("Not a feature collection:",this.config.map);return}const t=zt([this.coords.longitude,this.coords.latitude]),n=this.config.map.features.find(r=>sn(r)&&tn(t,r).features.length>0);if(n)return n.properties||console.warn("Found a feature but no properties"),n};function rn(e){return e&&!!e.patterns&&ct(e.map)}function ct(e){return!!e&&e.type==="FeatureCollection"}function on(e){return!!e&&(e.type==="Polygon"||e.type==="MultiPolygon")}function sn(e){return!!e&&typeof e=="object"&&e.type==="Feature"&&on(e.geometry)}function ln(e){return!!e&&typeof e=="string"&&Z.includes(e)}function an(e){const t=new Date(e.getFullYear(),e.getMonth(),1),n=rt(t,{days:-1*t.getDay()}),r=[];let i=new Date(n.getTime());i.setHours(0,0,0,0);for(let o=0;o<42;o++){let s=o%7,l=Math.floor(o/7);s===0&&(r[l]=[]),r[l][s]=new Date(i.getTime()),i.setDate(i.getDate()+1)}return r}const fn="_widget_1gl5q_2",un="_day_1gl5q_17",cn="_label_1gl5q_31",dn="_icons_1gl5q_37",hn="_icon_1gl5q_37",X={widget:fn,day:un,label:cn,icons:dn,icon:hn},pn="_calendar_1uy8b_2",yn="_today_1uy8b_21",gn="_weekend_1uy8b_25",wn="_off_1uy8b_33",dt={calendar:pn,today:yn,weekend:gn,"time-travel":"_time-travel_1uy8b_29",off:wn};function mn(e){const t=new Date().setHours(0,0,0,0),n={off:!Gt(e,t),weekend:qt(e),today:$t(e),"time-travel":Yt(e,t)};return Object.entries(n).reduce((r,[i,o])=>o?`${r} ${dt[i]}`:r,"")}function bn(e){const t=e.today.toLocaleString("en",{month:"long"});return p("table",{class:dt.calendar},p("thead",null,p("tr",null,p("th",{colspan:Z.length},t)),p("tr",null,Z.map(n=>p("th",null,n.slice(0,2))))),p("tbody",null,an(e.today).map((n,r)=>p("tr",{"crank-key":r},n.map((i,o)=>p("td",{class:mn(i),"crank-key":o},e.children?e.children(i):i.getDate()))))))}function*Xe(e){let t=null;for(let n of this){!t&&n.config&&n.coordinates?t=new nn(n.config,n.coordinates):t&&n.coordinates?t.updateCoordinates(n.coordinates):(!n.config||!n.coordinates)&&(t=null);const r=new Date,i=t==null?void 0:t.getNextDate(r);yield p("div",{class:X.widget},p(bn,{today:r},o=>p("div",{class:X.day},p("div",{class:X.label},o.getDate()),p("div",{class:X.icons},t==null?void 0:t.getColors(o).map(s=>p("div",{"crank-key":s,class:X.icon,style:{"background-color":s}}))))),p("div",{class:X.status},n.config?n.coordinates?i===r?p("p",null,"It's today!!"):i&&Ut(i)?p("p",null,"It's tomorrow."):null:p("p",null,"Acquiring location..."):p("p",null,"Sorry, no bin data for your location.")))}}async function*vn(e){let t,n;for await(e of this){yield p(Xe,{config:t}),t=await(await fetch(e.url,{mode:"cors"})).json(),rn(t)||(console.warn("invalid map config:",e.url),t=void 0);try{n=await Bt({enableHighAccuracy:!0,cache:300})}catch(i){console.error(i)}yield p(Xe,{config:t,coordinates:n})}}async function ht(){const e=document.querySelectorAll("[data-binday]");for(let t of e)t.dataset.binday!=="true"&&(kn(t),t.dataset.binday="true")}async function kn(e){const t=e.getAttribute("data-binday");try{if(!t)throw new Error("missing binday URL");Lt.render(p(vn,{url:t}),e)}catch(n){console.error(n)}}Object.defineProperty(window,"__binday__",{writable:!1,value:Object.freeze({render:ht})});It(ht);
